<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Scaffolding Inspection & Tag Tracker</title>

<style>
:root{
  --ink:#111;
  --muted:#555;
  --line:#cfd4da;
  --header:#1f2937;
  --light:#f3f4f6;
  --okbg:#ecfdf5;
  --warnbg:#fffbeb;
  --badbg:#fef2f2;
  --nibg:#eef2ff;
  --warn:#b45309;
}

*{ box-sizing:border-box; }

body{
  font-family: Arial, Helvetica, sans-serif;
  margin:0;
  background:#fff;
  color:var(--ink);
}

header{
  background:var(--header);
  color:#fff;
  padding:12px 14px;
}

header h1{
  margin:0;
  font-size:18px;
}

.container{
  padding:14px;
  max-width:1100px;
  margin:auto;
}

.section-title{
  background:var(--light);
  padding:6px 8px;
  margin-top:14px;
  font-weight:bold;
  border-left:4px solid var(--header);
  font-size:13px;
}

table{
  width:100%;
  border-collapse:collapse;
  margin-top:6px;
}

th, td{
  border:1px solid var(--line);
  padding:6px;
  font-size:12px;
  vertical-align:top;
}

th{ background:#e5e7eb; }

.checkbox{ width:16px; height:16px; }

input[type="text"], select{
  width:100%;
  padding:4px;
  border:1px solid var(--line);
  border-radius:6px;
  font-size:12px;
}

textarea{
  width:100%;
  min-height:80px;
  padding:6px;
  border:1px solid var(--line);
  border-radius:8px;
  font-size:12px;
}

button{
  padding:6px 10px;
  background:#1f2937;
  color:#fff;
  border:none;
  border-radius:6px;
  cursor:pointer;
  margin-top:8px;
  font-size:12px;
}

.checklist-img{
  width:100%;
  max-width:320px; /* smaller to keep page 1 tight */
  height:auto;
  display:block;
  margin:6px auto 2px auto;
  border:1px solid var(--line);
  border-radius:8px;
}

.summary{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  align-items:center;
  margin-top:8px;
}

.badge{
  display:inline-block;
  padding:6px 8px;
  border:1px solid var(--line);
  border-radius:10px;
  background:#fff;
  font-size:12px;
}

.badge strong{ font-size:12px; }

.warn-badge{
  border-color:#f59e0b;
  background:#fffbeb;
}

.alert{
  margin-top:8px;
  padding:8px;
  border-radius:10px;
  border:1px solid #f59e0b;
  background:#fffbeb;
  display:none;
  font-size:12px;
}

.alert ul{ margin:6px 0 0 18px; }

.limit-msg{
  margin-top:8px;
  padding:8px;
  border:1px solid rgba(180,83,9,0.35);
  background: rgba(245,158,11,0.12);
  color: var(--warn);
  border-radius:10px;
  font-size:12px;
  display:none;
}

.small-note{
  color:var(--muted);
  font-size:11px;
  margin-top:6px;
}

/* Row Highlighting */
tr.status-green td{ background:var(--okbg); }
tr.status-yellow td{ background:var(--warnbg); }
tr.status-red td{ background:var(--badbg); }
tr.not-inspected td{
  box-shadow: inset 0 0 0 2px rgba(79,70,229,0.25);
  background:var(--nibg);
}

/* Force page 2 start */
.page-break{
  page-break-before: always;
}

/* PRINT: compress spacing + hide non-print elements to ensure 2 pages */
@media print{
  @page { size: Letter; margin: 0.45in; }

  button, .alert, .limit-msg, .small-note { display:none !important; }

  body{ font-size:11px; }
  header{ padding:8px 10px; }
  header h1{ font-size:15px; }

  .container{ padding:10px; max-width: 100%; }

  .section-title{
    margin-top:10px;
    padding:4px 6px;
    font-size:12px;
  }

  th, td{ padding:4px; font-size:10.5px; }
  input[type="text"], select{ padding:2px; font-size:10.5px; }
  textarea{ min-height:60px; font-size:10.5px; }

  .checklist-img{ max-width:280px; margin:4px auto 0 auto; }
  .summary{ margin-top:6px; gap:6px; }
  .badge{ padding:4px 6px; font-size:10.5px; }
}
</style>
</head>

<body>

<header>
  <h1>Scaffolding Inspection & Tag Tracking System</h1>
</header>

<div class="container">

<button onclick="window.print()">Print / Save as PDF</button>

<!-- ================= PAGE 1 ================= -->

<div class="section-title">Quick Reference Visual</div>
<img class="checklist-img" src="scaffold-checklist.png" alt="Scaffold Checklist">

<div class="section-title">Project Information</div>
<table>
<tr>
  <td><strong>Project Name:</strong><br><input type="text"></td>
  <td><strong>Date:</strong><br><input type="text"></td>
  <td><strong>Competent Person:</strong><br><input type="text"></td>
</tr>
</table>

<div class="section-title">Scaffold Tag Tracker</div>

<div class="summary">
  <span class="badge"><strong>Total Rows:</strong> <span id="totalScaffolds">0</span></span>
  <span class="badge"><strong>Inspected Today:</strong> <span id="inspectedCount">0</span></span>
  <span class="badge warn-badge"><strong>Not Inspected:</strong> <span id="notInspectedCount">0</span></span>
</div>

<div id="notInspectedAlert" class="alert">
  <strong>Warning:</strong> The following scaffold tags are NOT marked inspected today:
  <ul id="notInspectedList"></ul>
</div>

<div id="limitMsg" class="limit-msg"></div>
<div class="small-note" id="rowHint"></div>

<table id="tagTable">
<thead>
<tr>
  <th style="width:120px;">Tag #</th>
  <th style="width:170px;">Location</th>
  <th style="width:90px; text-align:center;">Inspected</th>
  <th style="width:120px;">Status</th>
  <th>Notes</th>
</tr>
</thead>
<tbody>
<!-- Rows will be generated by JS to match MAX_PRINT_ROWS -->
</tbody>
</table>

<button onclick="addRow()">+ Add Scaffold Row</button>

<!-- ================= PAGE BREAK ================= -->
<div class="page-break"></div>

<!-- ================= PAGE 2 ================= -->

<div class="section-title">Daily Scaffold Inspection Checklist</div>
<table>
<tr>
  <td><input type="checkbox" class="checkbox"> Fully planked/decked platform</td>
  <td><input type="checkbox" class="checkbox"> Base plates & mud sills secure</td>
</tr>
<tr>
  <td><input type="checkbox" class="checkbox"> Guardrails installed</td>
  <td><input type="checkbox" class="checkbox"> Cross braces installed</td>
</tr>
<tr>
  <td><input type="checkbox" class="checkbox"> Scaffold plumb & level</td>
  <td><input type="checkbox" class="checkbox"> Proper ladder access</td>
</tr>
<tr>
  <td><input type="checkbox" class="checkbox"> No damaged components</td>
  <td><input type="checkbox" class="checkbox"> Load limits not exceeded</td>
</tr>
</table>

<div class="section-title">Deficiencies / Corrective Actions</div>
<textarea placeholder="Describe deficiencies and corrective actions..."></textarea>

<div class="section-title">Inspector Verification</div>
<table>
<tr>
  <td><strong>Inspector Name:</strong><br><input type="text"></td>
  <td><strong>Signature:</strong><br><input type="text"></td>
</tr>
</table>

</div>

<script>
/* ==============================
   2-page print guarantee strategy
   - Page 1 will overflow if too many scaffold rows exist
   - To guarantee 2 pages, we enforce a max row count that fits on page 1.
   - Adjust MAX_PRINT_ROWS if you want more/less.
================================ */

const MAX_PRINT_ROWS = 6; // âœ… 6 fits reliably on Letter w/ image + project info

function makeRow(){
  const tr = document.createElement("tr");
  tr.innerHTML = `
    <td><input type="text" placeholder="" class="tag-number"></td>
    <td><input type="text" placeholder="" class="tag-location"></td>
    <td style="text-align:center;"><input type="checkbox" class="checkbox inspected"></td>
    <td>
      <select class="status">
        <option value=""></option>
        <option value="Green">Green</option>
        <option value="Yellow">Yellow</option>
        <option value="Red">Red</option>
      </select>
    </td>
    <td><input type="text" placeholder=""></td>
  `;
  wireRowEvents(tr);
  return tr;
}

function initRows(){
  const tbody = document.querySelector("#tagTable tbody");
  tbody.innerHTML = "";
  for(let i=0; i<MAX_PRINT_ROWS; i++){
    tbody.appendChild(makeRow());
  }

  document.getElementById("rowHint").textContent =
    `Print-safe limit: ${MAX_PRINT_ROWS} scaffold rows (guaranteed 2-page print).`;
  updateSummary();
}

function applyRowStyles(row){
  row.classList.remove("status-green","status-yellow","status-red","not-inspected");

  const status = row.querySelector(".status")?.value || "";
  const inspected = row.querySelector(".inspected")?.checked || false;

  if(status === "Green") row.classList.add("status-green");
  if(status === "Yellow") row.classList.add("status-yellow");
  if(status === "Red") row.classList.add("status-red");

  const tag = (row.querySelector(".tag-number")?.value || "").trim();
  const loc = (row.querySelector(".tag-location")?.value || "").trim();
  const hasAnyData = tag.length > 0 || loc.length > 0 || status.length > 0;

  if(hasAnyData && !inspected){
    row.classList.add("not-inspected");
  }
}

function updateSummary(){
  const rows = Array.from(document.querySelectorAll("#tagTable tbody tr"));
  const total = rows.length;

  let inspectedCount = 0;
  let notInspectedTags = [];

  rows.forEach((row, idx) => {
    applyRowStyles(row);

    const inspected = row.querySelector(".inspected")?.checked || false;
    const tag = (row.querySelector(".tag-number")?.value || "").trim();
    const loc = (row.querySelector(".tag-location")?.value || "").trim();
    const status = row.querySelector(".status")?.value || "";

    const hasAnyData = tag.length > 0 || loc.length > 0 || status.length > 0;
    if(hasAnyData){
      if(inspected) inspectedCount++;
      else notInspectedTags.push(tag ? tag : `Row ${idx+1}`);
    }
  });

  document.getElementById("totalScaffolds").textContent = total;
  document.getElementById("inspectedCount").textContent = inspectedCount;
  document.getElementById("notInspectedCount").textContent = notInspectedTags.length;

  const alertBox = document.getElementById("notInspectedAlert");
  const list = document.getElementById("notInspectedList");
  list.innerHTML = "";

  if(notInspectedTags.length > 0){
    alertBox.style.display = "block";
    notInspectedTags.forEach(t => {
      const li = document.createElement("li");
      li.textContent = t;
      list.appendChild(li);
    });
  }else{
    alertBox.style.display = "none";
  }
}

function wireRowEvents(row){
  row.querySelectorAll("input, select").forEach(el => {
    el.addEventListener("input", updateSummary);
    el.addEventListener("change", updateSummary);
  });
}

/* Add row BUT keep print-safe limit */
function addRow(){
  const tbody = document.querySelector("#tagTable tbody");
  const current = tbody.querySelectorAll("tr").length;

  if(current >= MAX_PRINT_ROWS){
    const msg = document.getElementById("limitMsg");
    msg.style.display = "block";
    msg.textContent = `Max rows reached (${MAX_PRINT_ROWS}) to keep this form printing to 2 pages. If you need more scaffolds, increase MAX_PRINT_ROWS or create a second form.`;
    return;
  }

  tbody.appendChild(makeRow());
  updateSummary();
}

/* Init */
initRows();
</script>

</body>
</html>